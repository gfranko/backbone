(function(){var a={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};Backbone.sync=function(b,c,d){var e=a[b];d||(d={});var f={type:e,dataType:"json"};d.url||(f.url=_.result(c,"url")||urlError()),!d.data&&c&&(b==="create"||b==="update")&&(f.contentType="application/json",f.data=JSON.stringify(c)),Backbone.emulateJSON&&(f.contentType="application/x-www-form-urlencoded",f.data=f.data?{model:f.data}:{}),Backbone.emulateHTTP&&(e==="PUT"||e==="DELETE")&&(Backbone.emulateJSON&&(f.data._method=e),f.type="POST",f.beforeSend=function(a){a.setRequestHeader("X-HTTP-Method-Override",e)}),f.type!=="GET"&&!Backbone.emulateJSON&&(f.processData=!1);var g=d.success;d.success=function(a,b,e){g&&g(a,b,e),c.trigger("sync",c,a,d)};var h=d.error;return d.error=function(a,b,e){h&&h(c,a,d),c.trigger("error",c,a,d)},Backbone.ajax(_.extend(f,d))},Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)}}).call(this);